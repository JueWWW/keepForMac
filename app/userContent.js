webpackJsonp([3],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var l,u,c,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(10),p=r(f),m=n(40),g=r(m),_=n(186),y=n(243),h=r(y),b=n(404),v=r(b),x=n(411),E=r(x),w=n(410),k=r(w),N=n(409),H=r(N);n(2);var O=n(577),R=r(O),C=n(530),j=(l=(0,h.default)(R.default,{allowMultiple:!0}),l((c=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=k.default.storage.has("userInfo")?k.default.storage.get("userInfo"):{};return n.state={statistics:r.statistics||{},trainings:r.trainings||{},user:r.user||{}},n}return o(t,e),d(t,[{key:"componentWillMount",value:function(){var e=this;console.info(this.state),console.info(C.remote.getCurrentWindow()),C.remote.getCurrentWindow().on("focus",function(t){var n=k.default.storage.get("userInfo")||{};n.user&&n.user._id!==e.state.user._id&&e.setState({statistics:n.statistics,trainings:n.trainings,user:n.user})})}},{key:"componentWillUnmount",value:function(){this.state=null,k.default.storage.remove("userInfo")}},{key:"getCityAddress",value:function(e){var t=k.default.storage.get("cityJson").filter(function(t){return e==t.cityCode})[0];return t?t:{cityName:"银河,地球"}}},{key:"handleFriend",value:function(){var e=this,t=H.default.getUserData(this.state.user._id).then(function(t){t.ok&&e.setState({statistics:t.data.statistics,trainings:t.data.trainings,user:t.data.user})});this.state.user.relation?H.default.removeUserFollow(this.state.user._id).then(t()):H.default.addUserFollow(this.state.user._id).then(t())}},{key:"render",value:function(){var e=this.state.user;return p.default.createElement("div",{styleName:"user-container"},p.default.createElement("section",{styleName:"user-back"},p.default.createElement("div",{styleName:e.backgroundAvatar?"back-cover":"back-cover blur",style:{backgroundImage:"url("+(e.backgroundAvatar?e.backgroundAvatar:e.avatar)+"?imageMogr2/thumbnail/!300x300r)"}}),p.default.createElement("div",{styleName:"user-avatar"},p.default.createElement("img",{src:e.avatar?e.avatar+"?imageMogr2/thumbnail/!200x200r":"",alt:""})),p.default.createElement("div",{styleName:"user-info-content"},p.default.createElement("p",{styleName:"user-info-name"},p.default.createElement("span",null,e.username)),p.default.createElement("p",{styleName:"user-info-desc"},p.default.createElement("span",null,e.bio||"这个人很懒，啥都没写~")),p.default.createElement("p",{styleName:"user-info-other"},p.default.createElement("span",null,e.birthday?(0,E.default)(new Date(e.birthday)).format("YYYY-MM-DD"):"宇宙大爆炸时间")," | ",p.default.createElement("span",null,this.getCityAddress(e.citycode||"").cityName)),p.default.createElement("p",{styleName:"user-info-config"},this.state.statistics.follow+"关注"," - ",this.state.statistics.followed+"粉丝"," - ",this.state.statistics.totalEntries+"个动态"," - ",this.state.statistics.liked+"人加油"))),p.default.createElement("section",{styleName:"user-training"},p.default.createElement("div",{styleName:"user-training-line"},"累计训练 ",p.default.createElement("div",{styleName:"user-training-data"},this.state.trainings.totalDuration," 分钟")),p.default.createElement("div",{styleName:"user-training-line"},"训练次数 ",p.default.createElement("div",{styleName:"user-training-data"},this.state.trainings.totalTraining," 次")),p.default.createElement("div",{styleName:"user-training-line"},"训练天数 ",p.default.createElement("div",{styleName:"user-training-data"},this.state.trainings.totalTrainingDay," 天")),p.default.createElement("div",{styleName:"user-training-line"},"最长连续 ",p.default.createElement("div",{styleName:"user-training-data"},this.state.trainings.maxCombo," 天")),p.default.createElement("div",{styleName:"user-training-line"},"连续训练 ",p.default.createElement("div",{styleName:"user-training-data"},this.state.trainings.currentCombo," 天")),p.default.createElement("div",{styleName:"user-training-line"},"累计消耗 ",p.default.createElement("div",{styleName:"user-training-data"},this.state.trainings.totalCalorie," 千卡")),p.default.createElement("div",{styleName:"both-line"},p.default.createElement(_.Link,{to:"",styleName:"line-btn"},"去Ta主页(暂未开发)"),p.default.createElement("button",{styleName:e.relation?"follow-btn active":"follow-btn",onClick:this.handleFriend},p.default.createElement("span",{styleName:"sp-default"},e.relation?2==e.relation?"已关注":"相互关注":"关注Ta"),p.default.createElement("span",{styleName:"sp-hover"},e.relation?"取消关注":"关注Ta")))))}}]),t}(f.Component),s(c.prototype,"componentWillMount",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"componentWillMount"),c.prototype),s(c.prototype,"componentWillUnmount",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"componentWillUnmount"),c.prototype),s(c.prototype,"getCityAddress",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getCityAddress"),c.prototype),s(c.prototype,"handleFriend",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"handleFriend"),c.prototype),u=c))||u),T=document.createElement("div");T.id="container",T.className="container",document.querySelector("body").appendChild(T),g.default.render(p.default.createElement(j,null),document.getElementById("container"));(function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(j,"UserContent","/Users/liucong/Documents/Github/keepForMac/src/components/common/UserContent.js"),__REACT_HOT_LOADER__.register(T,"container","/Users/liucong/Documents/Github/keepForMac/src/components/common/UserContent.js"))})();!function(){if("undefined"!=typeof __REACT_HOT_LOADER__){if("function"==typeof e.exports)return void __REACT_HOT_LOADER__.register(e.exports,"module.exports","/Users/liucong/Documents/Github/keepForMac/src/components/common/UserContent.js");for(var t in e.exports)if(Object.prototype.hasOwnProperty.call(e.exports,t)){var n=void 0;try{n=e.exports[t]}catch(e){continue}__REACT_HOT_LOADER__.register(n,t,"/Users/liucong/Documents/Github/keepForMac/src/components/common/UserContent.js")}}}()},577:function(e,t,n){var r=n(578);"string"==typeof r&&(r=[[e.id,r,""]]);n(9)(r,{});r.locals&&(e.exports=r.locals)},578:function(e,t,n){t=e.exports=n(4)(),t.push([e.id,"._2iSfP{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column}._2fJro{height:260px;background:#000;padding:20px 10px 0;text-align:center;position:relative;-webkit-app-region:drag}._2fJro,._25K5c,.xR6HH{width:100%;overflow:hidden}._25K5c,.xR6HH{position:absolute;top:0;left:0;height:100%;background:50%/cover no-repeat;transform:scale(1.01)}._25K5c._1RPRB{filter:blur(30px)}.xR6HH{opacity:.45}.a0fr5{position:relative;margin:auto;width:78px;height:78px;border:1px solid #fff;border-radius:50%;background:#584f5f;box-shadow:0 5px 15px rgba(0,0,0,.8);transition:all .35s;overflow:hidden}.a0fr5:hover{transform:scale(1.2);border-color:#23a570}.a0fr5 img{width:100%;height:100%}.Fpgzu{padding:15px 0;text-align:center;position:relative;color:#fff}.Fpgzu p span{padding:0 6px;-webkit-app-region:no-drag;-webkit-user-select:auto}._3seF1{font-size:18px;margin-bottom:5px;text-shadow:0 0 2px rgba(0,0,0,.6),0 0 2px rgba(0,0,0,.6)}._2iUvc{line-height:15px;max-height:66px;overflow:hidden;text-shadow:0 0 2px rgba(0,0,0,.6),0 0 2px rgba(0,0,0,.6)}._2ES3L,._2iUvc{font-size:12px;margin-bottom:10px}._2ES3L{color:#fff}._3QjzQ{font-size:12px;color:#23a570;opacity:.6;transition:opacity .35s;text-shadow:0 0 1px rgba(0,0,0,.8)}._3QjzQ:hover{opacity:1}._1oAqh{background:#fff;padding:15px}._1gvj1{font-size:14px;color:#584f5f;display:flex;margin-bottom:12px}._10GQ5{flex:1;text-align:right}._3nixU{position:absolute;bottom:0;left:0;width:100%;display:flex;box-shadow:0 -1px 5px rgba(0,0,0,.8)}._2ylNR,._137HH{flex:1;background:#584f5f;color:#fff;font-size:14px;text-align:center;border:none;outline:none;padding:10px 0}._2ylNR:hover,._137HH:hover{color:#23a570;transition:color .25s,background .25s}._2ylNR:first-child,._137HH:first-child{border-right:1px solid #eee}._137HH._3T7wZ{color:#fff;background:#23a570}._137HH._3T7wZ:hover{background:#ff5065}._137HH ._34SIr,._137HH:hover ._2u-3R{display:none}._137HH:hover ._34SIr{display:inline}",""]),t.locals={"user-container":"_2iSfP","user-back":"_2fJro","back-cover":"_25K5c","back-avatar":"xR6HH",blur:"_1RPRB","user-avatar":"a0fr5","user-info-content":"Fpgzu","user-info-name":"_3seF1","user-info-desc":"_2iUvc","user-info-other":"_2ES3L","user-info-config":"_3QjzQ","user-training":"_1oAqh","user-training-line":"_1gvj1","user-training-data":"_10GQ5","both-line":"_3nixU","line-btn":"_2ylNR","follow-btn":"_137HH",active:"_3T7wZ","sp-hover":"_34SIr","sp-default":"_2u-3R"}}});